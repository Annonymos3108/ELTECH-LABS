# Курсовая работа. Тема: Частотный криптоанализ шифра Цезаря

## Задание

Разработать на языке **C++** приложение для частотного криптоанализа шифра Цезаря. Приложение должно иметь консольный интерфейс. Приложение должно читать входные данные из файла. Выходные данные должны сохраняться в файл. Приложение должно корректно обрабатывать ошибки, в том числе ошибки ввода/вывода, выделения/освобождения памяти.

[Шифр Цезаря](https://ru.wikipedia.org/wiki/%D0%A8%D0%B8%D1%84%D1%80_%D0%A6%D0%B5%D0%B7%D0%B0%D1%80%D1%8F) - это шифр простой подстановки, при шифровании каждый символ текста «сдвигается» на некоторое постоянное расстояние в алфавите. Это расстояние  ̶ ключ. Обратная процедура расшифровки выполняется аналогично. Задача состоит в том, что нужно расшифровывать текст без ключа. Для этого в данном проекте используется частотный анализ букв. В двух словах суть можно описать следующим образом. Необходимо сравнить частоты появления символов в шифре с эталонными. Потом, на основе частотного анализа определить ключ и расшифровывает текст. После расшифровки нужно полученный результат записать в новый файл.

## Шифрование и расшифровывание

Шифр Цезаря, также известный как шифр сдвига, код Цезаря или сдвиг Цезаря  ̶  это шифр простой подстановки, при шифровании каждый символ текста заменяется символом, находящимся на некотором постоянном расстоянии левее или правее в алфавите (см. рис. 1). Это расстояние и есть ключ. Например: шифрование с использованием ключа k=3. Буква «E» «сдвигается» на три буквы вперёд и становится буквой «H», буква «Z», перемещённая на три буквы вперёд, становится буквой «C», и так далее:

![cesar_grapical](https://upload.wikimedia.org/wikipedia/commons/thumb/2/2b/Caesar3.svg/1920px-Caesar3.svg.png)

Шифрованный текст получается путём замены каждой буквы оригинального текста соответствующей буквой шифрованного алфавита.

- Оригинальный текст: *“The quick brown fox jumps over the lazy dog.”*
- Шифрованный текст: *“Qeb nrfzh yoltk clu grjmp lsbo qeb ixwv ald.”*

Обратная процедура расшифровки выполняется аналогично.

## Атака

Пожалуй, лучше начать с того, что многократное шифрование никак не улучшает стойкость, так как применение шифров со сдвигом a и b эквивалентно применению шифра со сдвигом a + b. В математических терминах шифрование с различными ключами образует группу.
Шифр Цезаря может быть легко взломан даже в случае, когда взломщик знает только зашифрованный текст. Можно рассмотреть две ситуации:

1. Взломщик знает, что использовался шифр Цезаря, но не знает значение сдвига.
2. Взломщик знает (или предполагает), что использовался простой шифр подстановки, но не знает, что это — схема Цезаря.

В первом случае взлом шифра прост. Существует не так много вариантов значений сдвига (25 для английского языка), все они могут быть проверены методом грубой силы. Один из способов сделать это — выписать отрывок зашифрованного текста в столбец всех возможных сдвигов — техника, иногда называемая как «завершение простого компонента». Для обычного текста на естественном языке, скорее всего, будет только один вариант декодирования. Но, если использовать очень короткие сообщения, то возможны случаи, когда возможны несколько вариантов расшифровки с различными сдвигами. Например, зашифрованный текст «MPQY» может быть расшифрован как «aden», так и как «know» (предполагая, что открытый текст написан на английском языке). Точно также «ALIIP» можно расшифровать как «dolls» или как «wheel»; «AFCCP» как «jolly» или как «cheer».

Во втором случае шифр может быть взломан, используя те же самые методы что и для простого шифра подстановки, такие как частотный анализ. Используя эти методы, взломщик, вероятно, быстро заметит регулярность в решении и поймёт, что используемый шифр — это шифр Цезаря. 
В обеих случаях применима еще один из серии грубой силы подход для взлома — проверить частоты встречаемости букв. Изобразив диаграммой (см. рис. 2 и таблицу 1) частоты встречаемости букв в зашифрованном тексте, и зная ожидаемое распределение букв для обычного текста на рассматриваемом языке, можно легко определить сдвиг, взглянув на смещение некоторых характерных черт на диаграмме. Этот метод известен как частотный анализ. Частотный анализ, частотный криптоанализ — один из методов криптоанализа, основывающийся на предположении о существовании нетривиального статистического распределения отдельных символов и их последовательностей как в открытом тексте, так и в шифротексте, которое, с точностью до замены символов, будет сохраняться в процессе шифрования и дешифрования.
Упрощённо, частотный анализ предполагает, что частота появления заданной буквы алфавита в достаточно длинных текстах одна и та же для разных текстов одного языка. При этом, в случае моноалфавитного шифрования, если в шифротексте будет символ с аналогичной вероятностью появления, то можно предположить, что он и является указанной зашифрованной буквой. Аналогичные рассуждения применяются к биграммам (двубуквенным последовательностям), триграммам и т. д. в случае полиалфавитных шифров. Утверждается, что вероятность появления отдельных букв, а также их порядок в словах и фразах естественного языка подчиняются статистическим закономерностям: например, пара стоящих рядом букв «ся» в русском языке более вероятна, чем «цы», а «оь» в русском языке не встречается. Анализируя достаточно длинный текст, зашифрованный методом замены, можно по частотам появления символов произвести обратную замену и восстановить исходный текст.
Как упоминалось выше, важными характеристиками текста являются повторяемость букв (количество различных букв в каждом языке ограничено), пар букв, то есть m (m-грамм), сочетаемость букв друг с другом, чередование гласных и согласных, и некоторые другие особенности. Примечательно, что эти характеристики являются достаточно устойчивыми.
Например, в тексте на английском языке частота букв E, T, (обычно наиболее частых), и Q, Z (обычно более редких) особенно различаются. Этот процесс можно автоматизировать, сделав, чтобы компьютерная программа оценивала, насколько хорошо фактическое распределение частот соответствует ожидаемому распределению.


**Частота встречаемости букв в английском литературном тексте:**

Буква | E | T | A | O | I | N | S
--- | --- | --- | --- | --- | --- | --- | ---
Частота, % | 12,70 | 9,06 | 8,17 | 7,51 | 6,97 | 6,75 | 6,33

</br>

![letter_grapical](https://upload.wikimedia.org/wikipedia/commons/e/e7/English-slf-ru.png)

