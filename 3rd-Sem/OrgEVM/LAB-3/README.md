# Исследование видеосистемы (графический режим)

## Задание на лабораторную работу

Разработать программу для вывода на экран графика заданной функции.

Номер | Функция | Диапазон | аргумента 
:----:|:---------:|:---:| :---:
||| Начало | Конец
11 |(sin)^2(x)-(cos)^2(x) | π/2 | 7π

Произвести разметку осей и проставить истинные значения точек.</br>
Найти максимальное значение функции на заданном интервале и вывести в отдельное окно на экране.

### Краткие сведения о видеосистемах ПЭВМ, графическом режиме их работы и функциях обслуживания графического режима

Использование графики в языке `С++` - это многошаговый процесс. Прежде всего необходимо определить тип видеоадаптера. Затем устанавливается подходящий режим его работы и выполняется инициализация графической системы в выбранном режиме. После этого становятся доступными для использования функции графической библиотеки `graphicx.h` для построения основных графических примитивов: отрезков прямых линий, окружностей, эллипсов, прямоугольников, секторов, дуг и т.д., появляется возможность вывода текста с использованием различных шрифтов.
Использование библиотеки графики намного сокращает объем программирования для вывода основных графических примитивов. `С++` "маскирует" многие технические детали управления оборудованием, о которых пользователь должен быть осведомлен при работе с видеоадаптером через порты или `BIOS`. Платой за эти удобства является значительное увеличение размера .ЕХЕ-файлов. Использование графической библиотеки `С++` требует знакомства с моделью графической системы, применяемой компилятором для представления графической системы компьютера. Можно сказать, что сложность овладения деталями аппаратных средств видеоадаптеров сравнима со сложностью освоения графической модели. Однако достоинство графической модели заключается в ее относительной независимости от различных типов видеоадаптеров и открытости для дальнейших расширений. Появление новых типов видеоадаптеров не потребует большой переработки программ, так как все новые особенности аппаратуры будут учитываться в средствах библиотеки С++.
Весь код библиотеки графики разбивается на две части: немобильную, которая зависит от типа видеоадаптера и мобильную.
Немобильная часть представляет собой так называемый .`BGI`-драйвер (BGI - Borland Graphics Interface). Драйвер является обработчиком прерывания 10h, который должен дополнить системный обработчик до того, как будут использоваться мобильные функции. Перед завершением программы таблица векторов прерывания восстанавливается.
Основные функции, выполняемые .BGI-драйвером, сводятся к установке и обновлению ряда внешних переменных, которые могут изменяться как функциями системного обработчика прерывания 10h (например, при переключении видеорежима, изменении регистров палитры и т.п.), так и мобильными функциями библиотеки графики. `С++` включает целую коллекцию драйверов для каждого из типов адаптеров, хранимых обычно в отдельном поддиректории. Система графики является открытой для расширений, так как позволяет использовать и собственные .BGI-драйверы. Сложность состоит в том, что фирма Borland International не раскрывает пока внутреннюю структуру драйвера.
Совокупность внешних переменных библиотеки графики и особенностей поведения мобильных функций образует модель графики С++.

## Алгоритмы

Для получения значений функции на заданном отрезке используется данная функция:

```C++
void make_fun(int N)
{
    double x, dx=7.*M_PI/N;
    int i;
    for (i=0, x=M_PI/2.; i<N; i++, x+=dx) {
        R[i]=(float)(pow(sin(x),2)-pow(cos(x),2)); 
        if(Rmax<R[i]) Rmax=R[i];
    }
}
```

что представляет собой цикл for по числу точек графика функции, где для расчета значения функции как аргумент используется значение `х` в данной точке.
Для нормирования значений функции используется цикл `for` по числу точек графика функции

```C++
for (i=0;i<N;i++) RN[i]=Y0-(int)(R[i]/Rmax*(float)(Y0-Y1));
```

где в каждой итерации берется ранее рассчитанное значение функции, и учитывая размеры окна нормируется и записывается в новый массив.
Для рисования графика функции используется цикл `for` по числу точек графика функции

```C++
for (i=0;i<N;i++) {
    putpixel(i+X0,RN[i],12);
    delay(20);
}
```
